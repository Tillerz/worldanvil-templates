{% set resources = ["Iron Ore", "Iron", "Silver", "Gold", "Stone", "Glass", "Wood", "Fur", "Leather", "Cloth", "Wool", "Food", "Bread", "Water", "Flour", "Grain", "Meat", "Fish", "Vegetables", "Tallow", "Herbs" ] %}
<div class='container-fluid fl-sheet'>
  <div class='row'>
    {% set img = variables.img|default %}{% set wd = 12 %}{% if img > 0 %}{% set wd = 8 %}{% endif %}
    <div class='col-12 col-md-{{wd}}'>
      <div class='card stronghold details' id='card-stronghold details'>
        <div class='card-header stronghold details'>{{variables.name|default}}</div>
        <div class='card-body of'>
          <table class='mytable'>
            <tr><th class='lbl od lbl-location'> Location </th><td class='var od var-location'> {{variables.location|default}} </td></tr>
            <tr><th class='lbl ev lbl-defense-rating'> Defense Rating </th><td class='var ev var-defense-rating'>{{variables.defense_rating|default}}</td></tr>
          </table>
          {% if variables.notes|default != "" %}
          <br>
          <div class='var od var-notes'> {{variables.notes|default|nl2br}} </div>
          {% endif %}
        </div>
      </div>
    </div>
    {% if img > 0 %}
    <div class='col-12 col-md-4'>
      <div class='var var-img'>[img:{{img}}]</div>
    </div>
    {% endif %}
  </div>
  <div class='row'>
    <div class='col-12 col-md-6'>
      <div class='card functions' id='card-functions'>
        <div class='card-header functions'>Functions</div>
        <div class='card-body of'>
          <table class='mytable'>
            <tr>
              <th class='hdr hdr-function-name' width=25%> Name </th>
              <th class='hdr hdr-function-number c' width=15%> Number </th>
              <th class='hdr hdr-function-production c'> Production / Effect </th>
            </tr>
            {% for i in 1..99 %}
              {% set id = i %}{% if id < 10 %}{% set id = '0' ~ id %}{% endif %}{% if id < 100 %}{% set id = '0' ~ id %}{% endif %}
              {% set name = attribute(variables, 'function_name_' ~ id)|default %}
              {% if name != "" %}
                {% set eo = 'od' %}{% if id is even %}{% set eo = 'ev' %}{% endif %}
            <tr>
              <td class='var {{eo}} var-function-name'> {{name}} </td>
              <td class='var {{eo}} var-function-number c'>{{attribute(variables, 'function_number_' ~ id)|default}}</td>
              <td class='var {{eo}} var-function-production c'>{{attribute(variables, 'function_production_' ~ id)|default}}</td>
            </tr>
              {% endif %}
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
    <div class='col-12 col-md-6'>
      <div class='card hirelings' id='card-hirelings'>
        <div class='card-header hirelings'>Hirelings</div>
        <div class='card-body of'>
          <table class='mytable'>
            <tr>
              <th class='hdr hdr-hireling-name'> Name </th>
              <th class='hdr hdr-hireling-number c' width=20%> Number </th>
              <th class='hdr hdr-hireling-salary c' width=20%> Salary </th>
            </tr>
            {% for i in 1..99 %}
              {% set id = i %}{% if id < 10 %}{% set id = '0' ~ id %}{% endif %}{% if id < 100 %}{% set id = '0' ~ id %}{% endif %}
              {% set name = attribute(variables, 'hireling_name_' ~ id)|default %}
              {% if name != "" %}
                {% set eo = 'od' %}{% if id is even %}{% set eo = 'ev' %}{% endif %}
            <tr>
              <td class='var {{eo}} var-hireling-name'> {{name}} </td>
              <td class='var {{eo}} var-hireling-number c'>{{attribute(variables, 'hireling_number_' ~ id)|default}}</td>
              <td class='var {{eo}} var-hireling-salary c'>{{attribute(variables, 'hireling_salary_' ~ id)|default}}</td>
            </tr>
              {% endif %}
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class='row'>
    <div class='col-12'>
      <div class='card stockpile' id='card-stockpile'>
        <div class='card-header stockpile'>Stockpile</div>
        <div class='card-body of'>
          <div class='row'>
            <div class='col-12 col-md-4'>
              <table class='mytable'>
              <tr>
              <th class='hdr hdr-stockpile-name'> Name </th>
              <th class='hdr hdr-stockpile-units c' width=25%> Units </th>
              </tr>
              {% for i in 1..10 %}
                {% set id = i %}{% if id < 10 %}{% set id = '0' ~ id %}{% endif %}{% if id < 100 %}{% set id = '0' ~ id %}{% endif %}
                {% set name = attribute(variables, 'stockpile_name_' ~ id)|default %}
                {% if name == "" %}{% set name = resources[i-1]|default %}{% endif %}
                {% set units = attribute(variables, 'stockpile_units_' ~ id)|default %}
                {% if units < 1 %}{% set units = '0' %}{% endif %}
                {% set eo = 'od' %}{% if id is even %}{% set eo = 'ev' %}{% endif %}
              <tr>
              <td class='var {{eo}} var-stockpile-name'> {{name}} </td>
              <td class='var {{eo}} var-stockpile-units c'>{{units}}</td>
              </tr>
              {% endfor %}
              </table>
            </div>
            <div class='col-12 col-md-4'>
              <table class='mytable'>
              <tr>
              <th class='hdr hdr-stockpile-name'> Name </th>
              <th class='hdr hdr-stockpile-units c' width=25%> Units </th>
              </tr>
              {% for i in 11..20 %}
                {% set id = i %}{% if id < 10 %}{% set id = '0' ~ id %}{% endif %}{% if id < 100 %}{% set id = '0' ~ id %}{% endif %}
                {% set name = attribute(variables, 'stockpile_name_' ~ id)|default %}
                {% if name == "" %}{% set name = resources[i-1]|default %}{% endif %}
                {% set units = attribute(variables, 'stockpile_units_' ~ id)|default %}
                {% if units < 1 %}{% set units = 0 %}{% endif %}
                {% set eo = 'od' %}{% if id is even %}{% set eo = 'ev' %}{% endif %}
              <tr>
              <td class='var {{eo}} var-stockpile-name'> {{name}} </td>
              <td class='var {{eo}} var-stockpile-units c'>{{units}}</td>
              </tr>
              {% endfor %}
              </table>
            </div>
            <div class='col-12 col-md-4'>
              <table class='mytable'>
              <tr>
              <th class='hdr hdr-stockpile-name'> Name </th>
              <th class='hdr hdr-stockpile-units c' width=25%> Units </th>
              </tr>
              {% for i in 21..30 %}
                {% set id = i %}{% if id < 10 %}{% set id = '0' ~ id %}{% endif %}{% if id < 100 %}{% set id = '0' ~ id %}{% endif %}
                {% set name = attribute(variables, 'stockpile_name_' ~ id)|default %}
                {% if name == "" %}{% set name = resources[i-1]|default %}{% endif %}
                {% set units = attribute(variables, 'stockpile_units_' ~ id)|default %}
                {% if units < 1 %}{% set units = 0 %}{% endif %}
                {% if name != "" %}
                  {% set eo = 'od' %}{% if id is even %}{% set eo = 'ev' %}{% endif %}
              <tr>
              <td class='var {{eo}} var-stockpile-name'> {{name}} </td>
              <td class='var {{eo}} var-stockpile-units c'>{{units}}</td>
              </tr>
                {% endif %}
              {% endfor %}
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>